<!-- תפריט צד — Nis רפורטר -->

<style>
  .menu-button {
    width: 40px;
    cursor: pointer;
    margin: 15px;
  }
  .menu-button span {
    display: block;
    height: 5px;
    margin: 6px 0;
    background: #fff;
    border-radius: 3px;
    transition: 0.3s;
  }

  .side-menu {
    position: fixed;
    top: 0;
    right: -260px;
    width: 260px;
    height: 100%;
    background: #111;
    color: #fff;
    padding: 20px;
    transition: 0.35s;
    z-index: 9999;
    font-size: 22px;
  }
  .side-menu.open {
    right: 0;
  }

  .menu-item {
    padding: 15px 0;
    border-bottom: 1px solid #333;
    cursor: pointer;
  }
</style>

<div class="menu-button" id="menuBtn">
  <span></span>
  <span></span>
  <span></span>
</div>

<div id="sideMenu" class="side-menu">

  <div class="menu-item" onclick="openAbout()">אודות</div>
  <div class="menu-item" onclick="openSteps()">שלבים</div>

  <div class="menu-item" onclick="openGithub()">
    <img src="github-icon.png"
         alt="icon"
         style="width:24px; height:24px; vertical-align:middle; margin-left:8px;">
    פתיחת טיקט
  </div>

  <div id="versionLine" class="menu-item" style="font-size:14px; color:#aaa; margin-top:10px;">
    מס' גרסה: ...
  </div>

  <div style="text-align:center; margin-top:15px; font-size:16px; color:#ffeb3b; font-weight:bold;">
    © פותח על ידי ניסים אלביליה
  </div>

</div>

<script>
  const menuBtn = document.getElementById("menuBtn");
  const sideMenu = document.getElementById("sideMenu");

  menuBtn.addEventListener("click", () => {
    sideMenu.classList.toggle("open");
    navigator.vibrate?.(20);
  });

  async function loadVersion() {
    try {
      const res = await fetch(
        "https://raw.githubusercontent.com/albilia/Forklift-Reports/main/version.json?t=" + Date.now()
      );
      const data = await res.json();
      document.getElementById("versionLine").textContent = "מס' גרסה: " + data.version;
    } catch (e) {
      console.log("Version fetch failed");
    }
  }
  loadVersion();

  function openAbout() {
    alert(
      "אודות המערכת:\n\n" +
      "מערכת Nis רפורטר פותחה לתת מענה לסריקת תוויות ומדבקות במחסנים.\n" +
      "לכל מחסן נכתב קוד מותאם למערכת Google Cloud Vision OCR.\n\n" +
      "מחסן חומרי גלם משתמש בקוד לקריאת מדבקות.\n" +
      "מחסן תוצר גמר משתמש בקוד לקריאת תוויות.\n\n" +
      "הכניסה למערכת מתבצעת באמצעות זיהוי מספר הנייד של העובד שהורשה לכך.\n" +
      "מנהל העבודה יכול להוסיף או למחוק משתמשים במערכת ניהול המשתמשים.\n\n" +
      "© כל הזכויות שמורות — Nis רפורטר"
    );
  }

  function openSteps() {
    alert(
      "שלבי העבודה:\n\n" +
      "1. הזן מספר טלפון במסך הכניסה.\n" +
      "2. בחר מחסן — חומרי גלם / תוצר גמר.\n" +
      "3. במחסן תוצר גמר: בחר תת מחסן.\n" +
      "4. במסך הדיווח: לחץ על אייקון המצלמה לצילום.\n" +
      "5. לחץ 'פענח הכל' לשליחת התמונות ל־OCR.\n" +
      "6. אם הפענוח תקין — לחץ 'שמור דיווח'."
    );
  }

  function openGithub() {
    window.open("https://github.com/albilia/Forklift-Reports/issues", "_blank");
  }
</script>
