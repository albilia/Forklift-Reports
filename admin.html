<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>דשבורד מנהל – דו"ח תנועות</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    body { font-family: Arial; background:#101820; color:#f5f5f5; margin:0; }

    /* ⭐ כותרת + כפתורים מתוקנים ⭐ */
    header {
      padding:15px 20px;
      background:#1c2833;
      border-bottom:2px solid #263445;
    }

    header h1 {
      margin:0;
      font-size:22px;
      text-align:center;
      margin-bottom:10px;
    }

    .top-buttons {
      display:flex;
      gap:10px;
      justify-content:center;
      flex-wrap:wrap;
    }

    .top-buttons button {
      flex:1 1 120px;
      min-width:110px;
      background:#607d8b;
      color:white;
      border:none;
      padding:8px 14px;
      border-radius:8px;
      font-weight:bold;
      cursor:pointer;
      text-align:center;
    }

    main { padding:15px; }

    .filters {
      background:#17212b;
      padding:10px;
      border-radius:10px;
      margin-bottom:15px;
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      border:1px solid #263445;
    }

    .filters button {
      background:#263445;
      color:#f5f5f5;
      border:none;
      padding:6px 10px;
      border-radius:8px;
      cursor:pointer;
      font-weight:bold;
    }

    .filters input[type="date"] {
      background:#101820;
      color:#f5f5f5;
      border:1px solid #455a64;
      border-radius:6px;
      padding:4px 6px;
    }

    .accordion-section {
      margin-bottom:10px;
      border-radius:10px;
      overflow:hidden;
      background:#17212b;
      border:1px solid #263445;
    }

    .accordion-header {
      padding:10px 12px;
      background:#1f2a36;
      cursor:pointer;
      display:flex;
      justify-content:space-between;
      font-weight:bold;
    }

    .accordion-header.open .arrow { transform:rotate(90deg); }

    .accordion-content {
      max-height:0;
      overflow:hidden;
      transition:max-height .25s ease;
    }

    .accordion-inner { padding:8px 10px; }

    table {
      width:100%;
      border-collapse:collapse;
      font-size:12px;
    }

    thead { background:#263445; position:sticky; top:0; }

    th,td {
      padding:6px 4px;
      border-bottom:1px solid #263445;
      white-space:nowrap;
      text-align:center;
    }

    tbody tr:nth-child(even){ background:#1f2a36; }
    tbody tr:nth-child(odd){ background:#141c24; }

    .table-wrapper {
      max-height:320px;
      overflow:auto;
      border-radius:8px;
      border:1px solid #263445;
    }

    .summary-cards {
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(160px,1fr));
      gap:10px;
      margin-bottom:15px;
    }

    .card {
      background:#17212b;
      border-radius:10px;
      padding:10px;
      text-align:center;
      border:1px solid #263445;
    }

    .card-title { font-size:13px; color:#b0bec5; }
    .card-value { font-size:20px; font-weight:bold; color:#ffeb3b; }

    .loader {
      display:none;
      text-align:center;
      margin:15px 0;
      color:#ffeb3b;
      font-weight:bold;
    }

    .error {
      color:#ff5252;
      text-align:center;
      margin:10px 0;
      font-weight:bold;
    }

    #chartsSection {
      margin-top:40px;
      padding:20px;
      background:#17212b;
      border-radius:10px;
      border:1px solid #263445;
      display:flex;
      justify-content:center;
    }

    #makatPieChart { max-width:100%; }

    th.resizable { position:relative; }
    th.resizable::after {
      content:"";
      position:absolute;
      left:0;
      top:0;
      width:4px;
      height:100%;
      cursor:col-resize;
    }
  </style>
</head>

<body>

<header>
  <h1>דשבורד מנהל – דו"ח תנועות</h1>

  <!-- ⭐ כפתורים מתוקנים ⭐ -->
  <div class="top-buttons">
    <button id="refreshBtn">רענון</button>
    <button id="backBtn" onclick="goBack()">חזור</button>
  </div>
</header>

<main>

  <!-- כל שאר הקוד שלך נשאר זהה לחלוטין -->

  <div class="filters">
    <div>
      <button onclick="setQuickRange('today')">היום</button>
      <button onclick="setQuickRange('week')">שבוע</button>
      <button onclick="setQuickRange('month')">חודש</button>
    </div>

    <div>
      <label>מתאריך:</label>
      <input type="date" id="fromDate" onchange="applyFilters()">
      <label>עד תאריך:</label>
      <input type="date" id="toDate" onchange="applyFilters()">
    </div>

    <div>
      <button onclick="setShift('morning')">משמרת בוקר</button>
      <button onclick="setShift('evening')">משמרת ערב</button>
    </div>
  </div>

  <div class="summary-cards">
    <div class="card"><div class="card-title">סה"כ דווחים</div><div class="card-value" id="totalReports">0</div></div>
    <div class="card"><div class="card-title">סה"כ משטחים</div><div class="card-value" id="totalPallets">0</div></div>
    <div class="card"><div class="card-title">סה"כ יחידות</div><div class="card-value" id="totalUnits">0</div></div>
    <div class="card"><div class="card-title">סה"כ עובדים</div><div class="card-value" id="totalWorkers">0</div></div>
  </div>

  <div class="loader" id="loader">טוען נתונים...</div>
  <div class="error" id="errorMsg"></div>

  <!-- כל שאר האקורדיונים, הטבלאות והגרפים נשארים בדיוק כמו בקובץ שלך -->
  
  <!-- ... -->
  
</main>

<script>
  /* כל הסקריפטים שלך נשארים זהים */
  document.getElementById("refreshBtn").addEventListener("click", applyFilters);

  function goBack() {
    window.history.back();
  }
</script>

</body>
</html>